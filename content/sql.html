
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Base de Datos · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="sinatra.html" />
    
    
    <link rel="prev" href="mvc.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="rack.html">
            
                <a href="rack.html">
            
                    
                    Rack
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="bcrypt.html">
            
                <a href="bcrypt.html">
            
                    
                    Bcrypt
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="mvc.html">
            
                <a href="mvc.html">
            
                    
                    MVC
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.5" data-path="sql.html">
            
                <a href="sql.html">
            
                    
                    Base de Datos
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="sinatra.html">
            
                <a href="sinatra.html">
            
                    
                    Sinatra
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="erb.html">
            
                <a href="erb.html">
            
                    
                    Vistas
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="tests.html">
            
                <a href="tests.html">
            
                    
                    Tests
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="ci.html">
            
                <a href="ci.html">
            
                    
                    Integración continua
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="jquery.html">
            
                <a href="jquery.html">
            
                    
                    jQuery
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="chartkick.html">
            
                <a href="chartkick.html">
            
                    
                    Chartkick
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Base de Datos</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="base-de-datos">Base de datos</h1>
<p>Se ha optado por usar una base de datos relacional debido a la complejidad de la base de datos, las bases de datos no relacionales como mongodb no satisfac&#xED;an todas nuestras necesidades. </p>
<p>Elegimos SQLITE como sistema gestor de la base de datos, por su f&#xE1;cil integraci&#xF3;n con Sinatra. </p>
<p>Al seguir el MVC, el modelo no pod&#xED;a estar escrito en SQL puro, por lo que se requiere de un ORM (Mapeo Objeto Relacional) para convertir datos entre el sistema de tipos utilizado en el lenguaje de programaci&#xF3;n orientado a objetos y la utilizaci&#xF3;n de una base de datos relacional como motor de persistencia. </p>
<p>Active Record fue nuestro ORM escogido, &quot;que es la &apos;M&apos; en el MVC&quot;, es decir, trata la informaci&#xF3;n de la base de datos como objetos y clases para su f&#xE1;cil acceso. </p>
<p>Por ejemplo en nuestro caso, la tabla &apos;Usuario&apos;:</p>
<pre><code class="lang-ruby">create_table <span class="hljs-string">&quot;users&quot;</span>, <span class="hljs-symbol">force:</span> <span class="hljs-symbol">:cascade</span>  <span class="hljs-keyword">do</span> |t|
  t.string <span class="hljs-string">&quot;name&quot;</span>
  t.string <span class="hljs-string">&quot;email&quot;</span>
  t.string <span class="hljs-string">&quot;password_digest&quot;</span>
  t.boolean <span class="hljs-string">&quot;instructor&quot;</span>
  t.integer <span class="hljs-string">&quot;suspensos&quot;</span>
  t.integer <span class="hljs-string">&quot;aprobados&quot;</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>Usando el ORM Active Record, vemos que trata la tabla User como una clase, que hereda de la clase base del propio ORM. Esa clase tiene una serie de especificaciones (la obligaci&#xF3;n de ciertos atributos, las relaciones con otras tablas, etc)</p>
<p><img src="../images/modelo.png" alt=""></p>
<p>Las relaciones se especifican con el atributo <code>has_many</code>que ser&#xED;a relaciones uno a muchos en un modelo Entidad Relaci&#xF3;n. Para m&#xE1;s informaci&#xF3;n sobre las relaciones entre las tablas pinche <a href="http://edgeguides.rubyonrails.org/association_basics.html" target="_blank">aqu&#xED;</a></p>
<p>Si queremos insertar informaci&#xF3;n en la tabla, ser&#xED;a a trav&#xE9;s de instancias de la clases, como se puede ver en los controladores</p>
<pre><code class="lang-ruby">@user = User.new(<span class="hljs-symbol">name:</span> params[<span class="hljs-string">&quot;name&quot;</span>], <span class="hljs-symbol">email:</span> params[<span class="hljs-string">&quot;email&quot;</span>], <span class="hljs-symbol">password:</span> params[<span class="hljs-string">&quot;password&quot;</span>])
</code></pre>
<p>Y si queremos acceder a esa informaci&#xF3;n, basta con usar las variables asociadas a esa clase. </p>
<pre><code class="lang-ruby">@user = User.last
</code></pre>
<p>Que en SQL ser&#xED;a el equivaliente:</p>
<pre><code>SELECT * FROM users ORDER BY users.id DESC LIMIT 1
</code></pre><p>Para m&#xE1;s informaci&#xF3;n sobre las consultas en Active Record y su equivalencia en SQLITE visite la <a href="http://guides.rubyonrails.org/v2.3.8/active_record_querying.html" target="_blank">gu&#xED;a</a></p>
<h3 id="ruquiz">RuQuiz</h3>
<p><img src="../images/er.jpeg" alt=""></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="mvc.html" class="navigation navigation-prev " aria-label="Previous page: MVC">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="sinatra.html" class="navigation navigation-next " aria-label="Next page: Sinatra">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Base de Datos","level":"1.5","depth":1,"next":{"title":"Sinatra","level":"1.6","depth":1,"path":"content/sinatra.md","ref":"./content/sinatra.md","articles":[]},"previous":{"title":"MVC","level":"1.4","depth":1,"path":"content/mvc.md","ref":"./content/mvc.md","articles":[]},"dir":"ltr"},"config":{"plugins":["livereload"],"root":"./docs","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"gitbook":"*"},"file":{"path":"content/sql.md","mtime":"2017-12-19T19:54:41.077Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2017-12-19T19:56:05.979Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

